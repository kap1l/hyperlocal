import { AndroidWidget } from '../AndroidWidget';
import { buildWidgetTree } from './build-widget-tree';
/**
 * Request widget update for a given widget name and id
 * A callback will be called for the widget with the given id
 *
 * @param param0 {@link RequestWidgetUpdateByIdProps}
 */
export async function requestWidgetUpdateById(_ref) {
  let {
    widgetName,
    widgetId,
    renderWidget,
    widgetNotFound
  } = _ref;
  const widgetsInfo = await AndroidWidget.getWidgetInfo(widgetName);
  const widgetInfo = widgetsInfo.find(widget => widget.widgetId === widgetId);
  if (!widgetInfo) {
    widgetNotFound === null || widgetNotFound === void 0 ? void 0 : widgetNotFound();
    return;
  }
  const widgetComponent = await renderWidget(widgetInfo);
  const lightWidget = 'light' in widgetComponent ? buildWidgetTree(widgetComponent.light) : buildWidgetTree(widgetComponent);
  const darkWidget = 'dark' in widgetComponent ? buildWidgetTree(widgetComponent.dark) : null;
  const config = {
    light: lightWidget,
    dark: darkWidget
  };
  AndroidWidget.drawWidgetById(config, widgetName, widgetInfo.widgetId);
}
//# sourceMappingURL=request-widget-update-by-id.js.map